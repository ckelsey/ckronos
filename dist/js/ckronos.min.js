!function(e){}(angular.module("ckronos",["ngSanitize"])),function(e){e.directive("ckronosButtons",function(){return{restrict:"E",scope:{cancel:"=?",update:"=?"},template:'<div class=ckronos_buttons><button ng-click=update() ng-if=update><i class="fa fa-check"></i></button> <button ng-click=cancel() ng-if=cancel><i class="fa fa-close"></i></button></div>',link:function(e,t){t.on("$destroy",function(){e.$destroy()})}}})}(angular.module("ckronos")),function(e){"use strict";e.directive("ckronosCalendarNavigation",["CKronos",function(e){return{restrict:"E",scope:{date:"=",setMonth:"=",setToday:"="},template:'<div class=leftside><span class=month-label ng-bind=dateObject.data[dateObject.month].shortname></span>&nbsp;<span class=month-label ng-bind=dateObject.year></span></div><div class=rightside><button ng-if=setMonth ng-click=setMonth(-1)><i class="fa fa-chevron-left"></i></button> <button ng-if=setToday ng-click=setToday() class=today>&middot;</button> <button ng-if=setMonth ng-click=setMonth(1)><i class="fa fa-chevron-right"></i></button></div>',link:function(t,n){t.date?t.dateObject=e.parseDate(t.date):t.dateObject=e.parseDate();var a=t.$watch(function(){return t.date},function(n,a){n!==a&&(t.dateObject=e.parseDate(new Date(n)))});t.$on("$destroy",function(){a()}),n.on("$destroy",function(){t.$destroy()})}}}])}(angular.module("ckronos")),function(e){"use strict";e.directive("ckronosCalendar",["CKronos","$compile","$timeout",function(e,t,n){return{restrict:"E",scope:{update:"=?",dateHtml:"=?",date:"=?"},template:"<table class=ckronos_calendar ng-class=\"update ? 'clickable' : ''\"><thead><tr><th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th></tr></thead><tbody><tr ng-repeat=\"row in ctlr.calendar.rows\"><td ng-repeat=\"cell in row\" ng-class=\"cell.differentMonth ? 'diff_month' : cell.active ? 'active' : ''\" ng-click=update($event) day={{cell.day}} month={{cell.month}} year={{cell.year}}><div class=ckronos_calendar_day_number ng-bind=cell.day></div><div ng-if=cell.html ng-bind-html=cell.html></div></td></tr></tbody></table>",controller:["$scope",function(t){function n(){if(a.calendar={rows:[]},!isNaN(t.dateObject.day)&&!isNaN(t.dateObject.month)&&!isNaN(t.dateObject.year)){for(var n=null,o=new Date(t.dateObject.year,t.dateObject.month,1).getDay(),c=[],r=1;r<t.dateObject.data[t.dateObject.month].days+1;r+=1)n={day:r,month:t.dateObject.month,year:t.dateObject.year,active:!1,differentMonth:!1},c.push(n);if(o>0)for(var d=0===t.dateObject.month?e.monthsInYear(t.dateObject.year-1)[11]:t.dateObject.data[t.dateObject.month-1],s=0===t.dateObject.month?t.dateObject.year-1:t.dateObject.year,i=0;i<o;i+=1)n={day:d.days-i,month:d.index,year:s,active:!1,differentMonth:!0},c.unshift(n);for(var u=Math.ceil(c.length/7),l=7*u,m=l-c.length,h=1;h<=m;h+=1){var y=11===t.dateObject.month?e.monthsInYear(t.dateObject.year+1)[0]:t.dateObject.data[t.dateObject.month+1],p=11===t.dateObject.month?t.dateObject.year+1:t.dateObject.year;n={day:h,month:y.index,year:p,active:!1,differentMonth:!0},c.push(n)}for(var v=0,g=0;g<c.length;g+=1){0===v&&a.calendar.rows.push([]),c[g].day===t.dateObject.day&&c[g].month===t.dateObject.month&&c[g].year===t.dateObject.year&&(c[g].active=!0);var b=c[g].year,f=c[g].month,k=c[g].day;t.hasOwnProperty("dateHtml")&&t.dateHtml&&t.dateHtml.hasOwnProperty(b)&&t.dateHtml[b]&&t.dateHtml[b].hasOwnProperty(f)&&t.dateHtml[b][f]&&t.dateHtml[b][f].hasOwnProperty(k)&&t.dateHtml[b][f][k]&&(c[g].html=t.dateHtml[b][f][k]),a.calendar.rows[a.calendar.rows.length-1].push(c[g]),6===v?v=0:v++}}}t.date?t.dateObject=e.parseDate(t.date):t.dateObject=e.parseDate();var a=this;n();var o=t.$watch(function(){return t.date},function(a,o){a!==o&&e.validDate(new Date(a))&&e.parseDate(new Date(a))!==t.dateObject.date&&(t.dateObject=e.parseDate(new Date(a)),n())}),c=t.$watchCollection(function(){return t.dateObject},function(e,t){n()}),r=t.$watch(function(){return t.dateHtml},function(e,t){n()});t.$on("$destroy",function(){o(),r(),c()})}],controllerAs:"ctlr",link:function(e,t){t.on("$destroy",function(){e.$destroy()})}}}])}(angular.module("ckronos")),function(e){"use strict";e.directive("ckronosClock",["CKronos","$timeout","$window",function(e,t,n){return{restrict:"E",scope:{update:"=?",showSeconds:"=?",continuous:"=?",analog:"=?",date:"=?"},controller:["$scope",function(e){}],controllerAs:"ctlr",template:"<div class=ckronos_clock ng-class=\"showSecondsDisplay ? 'seconds' : ''\"><div ng-if=!showAnalog class=ckronos_clock_type_digital><div class=ckronos_clock_input><input type=text ng-model=dateObject.time.hour ckronos-leading-zero ng-change=\"validate('hour', dateObject.time.hour)\"></div><div class=ckronos_clock_text>:</div><div class=ckronos_clock_input><input type=text ng-model=dateObject.time.minute ckronos-leading-zero ng-change=\"validate('minute', dateObject.time.minute)\"></div><div ng-if=showSecondsDisplay class=ckronos_clock_text>:</div><div ng-if=showSecondsDisplay class=ckronos_clock_input><input type=text ng-model=dateObject.time.second ckronos-leading-zero ng-change=\"validate('second', dateObject.time.second)\"></div><div class=ckronos_clock_text>&nbsp;</div><div class=\"ckronos_clock_input ampm\"><select ng-model=dateObject.time.ampm ng-change=\"validate('ampm', dateObject.time.ampm)\"><option value=am>AM</option><option value=pm>PM</option></select></div></div><div ng-if=showAnalog class=ckronos_clock_type_analog><div class=ckronos_clock_type_analog-inner ng-class=\"continuous === 0 || continuous === '0' || continuous === undefined ? 'draggable' : ''\" ng-mousedown=analogDragStart($event)><div class=ckronos_clock_ticks_wrapper><div class=ckronos_clock_tick ng-repeat=\"i in getTicks() track by $index\"><div class=ckronos_clock_tick-inner></div></div></div><div class=\"ckronos_clock_hand hour\" ng-style=\"{'transform': 'rotate('+ hourDegrees +'deg)'}\"><div class=ckronos_clock_hand-inner><div class=ckronos_clock_hand-inner2></div></div></div><div class=\"ckronos_clock_hand minute\" ng-style=\"{'transform': 'rotate('+ minuteDegrees +'deg)'}\"><div class=ckronos_clock_hand-inner><div class=ckronos_clock_hand-inner2></div></div></div><div ng-if=showSecondsDisplay class=\"ckronos_clock_hand second\" ng-style=\"{'transform': 'rotate('+ secondDegrees +'deg)'}\"><div class=ckronos_clock_hand-inner><div class=ckronos_clock_hand-inner2></div></div></div><div class=ckronos_clock_type_analog-dot></div></div></div></div>",link:function(a,o){function c(e){document.body.removeEventListener("mousemove",a.updateAnalog,!1),document.body.removeEventListener("mouseup",c,!1),a.updateAnalog(e)}function r(){void 0===a.continuous||a.continuous!==!0&&"true"!==a.continuous&&1!==parseInt(a.continuous)||t(function(){a.dateObject=e.parseDate(),a.updateAnalog()}),i(r)}function d(e){void 0===e||0===parseInt(e)||"false"===e||e===!1?a.showAnalog=0:a.showAnalog=1,a.updateAnalog()}function s(e){void 0===e||"false"!==e&&e!==!1&&"0"!==e&&0!==e?a.showSecondsDisplay=!0:a.showSecondsDisplay=!1}var i=n.requestAnimationFrame||n.msRequestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.oRequestAnimationFrame,u=0;i||(i=function(e){var t=(new Date).getTime(),a=Math.max(0,16-(t-u));n.setTimeout(function(){e(t+a)},a),u=t+a}),a.dateObject||(a.date?a.dateObject=e.parseDate(a.date):a.dateObject=e.parseDate()),a.showAnalog=0,a.hourDegrees=30,a.minuteDegrees=-30,a.secondDegrees=0,a.getTicks=function(){return new Array(60)},a.updateAnalog=function(e){if(a.showAnalog&&(void 0===a.continuous||1!==parseInt(a.continuous)&&"true"!==a.continuous&&a.continuous!==!0)&&e){var n=o[0].querySelector(".ckronos_clock_type_analog-inner");if(n){var c=n.getBoundingClientRect(),r=c.width/2,d=c.left,s=c.top,i=r+d,u=r+s,l=e.clientX-i,m=e.clientY-u,h=Math.atan2(m,l)*(180/Math.PI),y=h+90-180;y<0&&(y+=360),y=Math.round(y)>-1||Math.round(y)<360?Math.round(y):0;var p=y/360;p=p<.5?p+.5:p-.5;var v=12*p,g=60*(v-Math.floor(v));a.dateObject.time.hour=Math.floor(v),a.dateObject.time.minute=Math.floor(g),a.dateObject.time.second=0,a.update&&a.update(a.dateObject.time)}}t(function(){a.hourDegrees=(a.dateObject.time.hour+a.dateObject.time.minute/60)/12*360,a.minuteDegrees=(a.dateObject.time.minute+a.dateObject.time.second/60)/60*360,a.secondDegrees=a.dateObject.time.second/60*360})},a.analogDragStart=function(e){a.updateAnalog(e),document.body.addEventListener("mousemove",a.updateAnalog,!1),document.body.addEventListener("mouseup",c,!1)},a.validate=function(e,t){if(a.update){if("ampm"===e)return a.update(a.dateObject.time);if(!isNaN(t)&&parseInt(t)>-1)return("hour"!==e||0!==parseInt(t))&&a.update(a.dateObject.time)}return!1},r(),d(a.analog),s(a.showSeconds);var l=a.$watch(function(){return a.analog},function(e,t){e!==t&&d(e)}),m=a.$watch(function(){return a.date},function(t,n){t!==n&&e.validDate(new Date(t))&&(a.dateObject=e.parseDate(new Date(t)),a.updateAnalog())}),h=a.$watch(function(){return a.showSeconds},function(e,t){e!==t&&s(e)});a.$on("$destroy",function(){m(),l(),h()}),o.on("$destroy",function(){a.$destroy()})}}}])}(angular.module("ckronos")),function(e){e.directive("ckronosDateString",["CKronos",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,a,o){function c(t){var a=new Date(t),o=null;return o=d?angular.element(document.querySelectorAll(d)):n,o&&o.length&&(e.validDate(a)?o.removeClass(s):o.addClass(s)),a}function r(e){var t=new Date(e);return t}var d=a.target,s=a.errorClass||"error";o.$parsers.push(c),o.$formatters.push(r),t.$watch(function(){return a.errorClass},function(e,t){e!==t&&(s=e)}),t.$watch(function(){return a.target},function(e,t){e!==t&&(d=e)})}}}])}(angular.module("ckronos")),function(e){"use strict";e.directive("ckronosDate",["CKronos","$compile","$timeout",function(e,t,n){return{restrict:"A",scope:{dateHtml:"=?",showTime:"=?"},require:"ngModel",link:function(a,o,c,r){function d(){return a.showTime&&(1===parseInt(a.showTime)||a.showTime===!0||"true"===a.showTime)}function s(){document.getElementById(l)&&angular.element(document.getElementById(l)).remove();var e='<div class="ckronos-date-time-wrapper" ng-class="active? \'active\' : \'\'" id="'+l+'"><div class="ckronos-date-time-inner"><ckronos-calendar-navigation date="dateObject.date" set-month="setMonth" set-today="setToday"></ckronos-calendar-navigation><ckronos-calendar update="updateFromEvent" date="dateObject.date" date-html="dateHtml"></ckronos-calendar>';d()&&(e+='<div class="ckronos-date-time_time_wrapper"><ckronos-clock date="dateObject.date" update="updateTime"></ckronos-clock><ckronos-buttons cancel="cancel" update="updateAndClose"></ckronos-buttons></div>'),e+="</div></div>";var n=t(e)(a);angular.element(document.body).append(n)}function i(e){return r.$setViewValue(e.date),r.$modelValue}var u=r.$modelValue,l=c.overlay,m=c.toggler,h=angular.copy(u);a.active=!1,a.dateObject=e.parseDate(u),angular.element(document.getElementById(m)).bind("click",function(){n(function(){a.active=!0,angular.element(document.body).addClass("ckronos-blur"),s()})}),a.updateDateObject=function(){a.dateObject=e.update(a.dateObject)},a.close=function(){a.active=!1,angular.element(document.body).removeClass("ckronos-blur"),document.getElementById(l)&&angular.element(document.getElementById(l)).remove()},a.cancel=function(){a.dateObject=e.parseDate(h),a.close()},a.updateAndClose=function(){i(a.dateObject),a.close()},a.updateFromEvent=function(t,n){if(a.dateObject=e.setEventData(t,a.dateObject),!d())return a.close(),i(a.dateObject)},a.updateTime=function(t){a.dateObject.time=t,a.dateObject=e.update(a.dateObject)},a.setMonth=function(e){return a.dateObject.data[a.dateObject.month+e]?a.dateObject.month=a.dateObject.month+e:(a.dateObject.year=a.dateObject.year+e,a.dateObject.data.length>a.dateObject.month+e?a.dateObject.month=a.dateObject.data.length-1:a.dateObject.month=0),a.dateObject.day>a.dateObject.data[a.dateObject.month].days&&(a.dateObject.day=a.dateObject.data[a.dateObject.month].days),a.updateDateObject()},a.setToday=function(){return a.dateObject=e.parseDate(new Date),d()||a.close(),a.updateDateObject()},a.$watch(function(){return r.$modelValue},function(t){t&&e.validDate(t)&&(u=t,h=angular.copy(u),a.dateObject=e.parseDate(u))}),o.on("$destroy",function(){a.$destroy()})}}}])}(angular.module("ckronos")),function(e){e.directive("ckronosLeadingZero",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){function o(e){return parseInt(e)<10&&(e="0"+e),e}function c(e){return parseInt(e)}a.$parsers.push(c),a.$formatters.push(o),t.on("$destroy",function(){e.$destroy()})}}})}(angular.module("ckronos")),function(e){"use strict";e.service("CKronos",function(){var e={validDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},displayTime:function(t,n){t=e.validDate(t)?new Date(t):new Date;var a=e.parseTime(t),o=[{key:"$HH$",value:a.Hour<10?"0"+a.Hour:a.Hour},{key:"$H$",value:a.Hour},{key:"$hh$",value:a.hour<10?"0"+a.hour:a.hour},{key:"$h$",value:a.hour},{key:"$mm$",value:a.minute<10?"0"+a.minute:a.minute},{key:"$m$",value:a.minute},{key:"$ss$",value:a.second<10?"0"+a.second:a.second},{key:"$s$",value:a.second},{key:"$AMPM$",value:a.ampm.toUpperCase()},{key:"$ampm$",value:a.ampm}],c=o.length;n||(n="$hh$:$mm$:$ss$ $ampm$");for(var r=0;r<c;r++)n.indexOf(o[r].key>-1)&&(n=n.replace(o[r].key,o[r].value));return n},parseTime:function(t){t=e.validDate(t)?new Date(t):new Date;var n,a,o,c,r;return t&&!isNaN(t.getHours())&&(n=t.getHours(),a=t.getHours(),a>11?(o="pm",n=n>12?n-12:n):0===a?(n=12,o="am"):o="am",c=t.getMinutes(),r=t.getSeconds()),{hour:n,Hour:a,minute:c,second:r,ampm:o}},displayDate:function(t,n){t=e.validDate(t)?new Date(t):new Date;var a=e.parseDate(t),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=[{key:"$month$",value:c[a.month]},{key:"$mon$",value:o[a.month]},{key:"$mm$",value:a.month+1<10?"0"+a.month+1:a.month+1},{key:"$m$",value:a.month+1},{key:"$day$",value:d[t.getDay()]},{key:"$da$",value:r[t.getDay()]},{key:"$dd$",value:a.day<10?"0"+a.day:a.day},{key:"$d$",value:a.day},{key:"$yyyy$",value:a.year.toString()},{key:"$yy$",value:a.year.toString().substr(2,2)}],i=s.length;n||(n="$mon$ $d$, $yyyy$");for(var u=0;u<i;u++)n.indexOf(s[u].key>-1)&&(n=n.replace(s[u].key,s[u].value));return n},parseDate:function(t){t=e.validDate(t)?new Date(t):new Date;var n,a,o,c;return n=t&&!isNaN(t.getYear())?t.getYear()+1900:null,a=t&&!isNaN(t.getMonth())?t.getMonth():null,o=t&&!isNaN(t.getDay())?t.getDate():null,c=e.parseTime(t),{date:t,year:n,month:a,day:o,time:c,data:e.monthsInYear(n)}},monthsInYear:function(t){return t=t?t:(new Date).getYear()+1900,[{longname:"January",shortname:"Jan",days:e.daysInMonth(0,t),index:0},{longname:"February",shortname:"Feb",days:e.daysInMonth(1,t),index:1},{longname:"March",shortname:"Mar",days:e.daysInMonth(2,t),index:2},{longname:"April",shortname:"Apr",days:e.daysInMonth(3,t),index:3},{longname:"May",shortname:"May",days:e.daysInMonth(4,t),index:4},{longname:"June",shortname:"Jun",days:e.daysInMonth(5,t),index:5},{longname:"July",shortname:"Jul",days:e.daysInMonth(6,t),index:6},{longname:"August",shortname:"Aug",days:e.daysInMonth(7,t),index:7},{longname:"September",shortname:"Sep",days:e.daysInMonth(8,t),index:8},{longname:"October",shortname:"Oct",days:e.daysInMonth(9,t),index:9},{longname:"November",shortname:"Nov",days:e.daysInMonth(10,t),index:10},{longname:"December",shortname:"Dec",days:e.daysInMonth(11,t),index:11}]},daysInMonth:function(e,t){switch(t=t?t:(new Date).getYear()+1900,e){case 1:return t%4===0&&t%100||t%400===0?29:28;case 8:case 3:case 5:case 10:return 30;default:return 31}},resetDate:function(e){var t=new Date;return t.setHours("am"===e.time.ampm?parseInt(e.time.hour):parseInt(e.time.hour)+12),t.setMinutes(parseInt(e.time.minute)),t.setSeconds(parseInt(e.time.second)),t.setYear(parseInt(e.year)),t.setDate(parseInt(e.day)),t.setMonth(parseInt(e.month)),t},update:function(t){return e.parseDate(e.resetDate(t))},setEventData:function(t,n){if(t){t.stopPropagation();var a=t.currentTarget,o=parseInt(a.getAttribute("day")),c=parseInt(a.getAttribute("month")),r=parseInt(a.getAttribute("year")),d=parseInt(a.getAttribute("hour")),s=parseInt(a.getAttribute("minute")),i=parseInt(a.getAttribute("second")),u=parseInt(a.getAttribute("ampm"));n.day=isNaN(o)?n.day:o,n.month=isNaN(c)?n.month:c,n.year=isNaN(r)?n.year:r,n.hour=isNaN(d)?n.hour:d,n.minute=isNaN(s)?n.minute:s,n.second=isNaN(i)?n.second:i,n.ampm=u||n.ampm}return n=e.update(n)}};return e})}(angular.module("ckronos")),function(e){"use strict";e.directive("ckronosTime",["CKronos","$compile","$timeout",function(e,t,n){return{restrict:"A",scope:{showSeconds:"=?"},require:"ngModel",link:function(a,o,c,r){function d(){document.getElementById(u)&&document.body.removeChild(document.getElementById(u));var e='<div class="ckronos-date-time-wrapper" ng-class="active? \'active\' : \'\'" id="'+u+'"><div class="ckronos-date-time-inner"><ckronos-clock date="dateObject.date" update="updateTime" show-seconds="showSeconds" class="clickable"></ckronos-clock><ckronos-buttons cancel="cancel" update="updateAndClose"></ckronos-buttons></div></div>',n=t(e)(a);angular.element(document.body).append(n)}function s(e){return r.$setViewValue(e.date),r.$modelValue}var i=r.$modelValue,u=c.overlay,l=c.toggler,m=angular.copy(i);a.active=!1,angular.element(document.getElementById(l)).bind("click",function(){n(function(){a.active=!0,angular.element(document.body).addClass("ckronos-blur")})}),a.dateObject=e.parseDate(i),a.close=function(){n(function(){a.active=!1,angular.element(document.body).removeClass("ckronos-blur")})},a.cancel=function(){a.dateObject=e.parseDate(m),a.close()},a.updateTime=function(t){a.dateObject.time=t,a.dateObject=e.update(a.dateObject)},a.updateAndClose=function(){s(a.dateObject),a.close()},a.$watch(function(){return r.$modelValue},function(t){t&&e.validDate(t)&&(i=t,m=angular.copy(i),a.dateObject=e.parseDate(i),d())}),o.on("$destroy",function(){a.$destroy()})}}}])}(angular.module("ckronos"));
//# sourceMappingURL=ckronos.min.js.map
